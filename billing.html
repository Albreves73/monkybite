<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MonkyBite — Billing Info</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- 🔷 Header -->
  <header>
    <a href="index.html" class="logo">
      <img src="logo.png" alt="MonkyBite Logo" />
      <span class="brand-name">MonkyBite</span>
    </a>
    <nav>
      <a href="index.html">HOME</a>
      <a href="login.html">LOGIN</a>
      <a href="plans.html">SIGN UP</a>
      <a href="contact.html">CONTACT</a>
    </nav>
  </header>

  <!-- 🔷 Billing Section -->
  <main class="get-started-box">
    <h1>Billing Information</h1>
    <p id="billing-plan">Loading plan...</p>

    <form id="billing-form">


      <!-- 🅿️ PayPal -->
      <div id="paypal-fields" style="display: none;">
        <div id="paypal-button-container"></div>
      </div>

      <button type="submit" class="primary-button">Submit Payment</button>
    </form>
  </main>

  <!-- 🔷 Footer -->
  <footer>
    <p>© 2025 MonkyBite.</p>
  </footer>

  <!-- 🔷 Script: Handle dynamic fields and submission -->
  <script>
    const plan = sessionStorage.getItem("plan") || "Basic";
    document.getElementById("billing-plan").textContent = `You're subscribing to the ${plan} plan.`;

    const methodSelect = document.getElementById("payment-method");
    const sections = {
      card: document.getElementById("card-fields"),
      paypal: document.getElementById("paypal-fields"),
      crypto: document.getElementById("crypto-fields")
    };

    methodSelect.addEventListener("change", () => {
      Object.values(sections).forEach(div => div.style.display = "none");
      const selected = methodSelect.value;
      if (sections[selected]) {
        sections[selected].style.display = "block";
      }

      const submitBtn = document.querySelector(".primary-button");
      submitBtn.style.display = selected === "paypal" ? "none" : "block";
    });

    document.getElementById("billing-form").addEventListener("submit", function(e) {
      e.preventDefault();
      window.location.href = "dashboard.html";
    });
  </script>

  <!-- 🔷 PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=AZsYp7y8oCYpRTVP1dG37awOkDytMe1FzjlcRlNZYH41DyKC7NQoZ1ZeP0f82E8rJK7xYN-EWoEbK8KQ&currency=USD"></script>

  <!-- 🔷 Renderizar botão PayPal -->
  <script>
    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            amount: {
              value: "4.99" // ajuste conforme o plano
            }
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert("Payment completed by " + details.payer.name.given_name);
          window.location.href = "dashboard.html";
        });
      }
    }).render("#paypal-button-container");
  </script>

</body>
</html>
